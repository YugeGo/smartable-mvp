<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>智表 (Smartable) - AI表格助手 MVP</title>
    <link rel="stylesheet" href="style.css">
    <!-- 引入 SheetJS 用于处理 Excel -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <!-- V1.5 新增: 引入 ECharts 用于图表绘制 -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/echarts/5.5.0/echarts.min.js"></script>
    <script src="script.js" defer></script>
</head>
<body>
    <aside id="sidebar">
        <div class="brand">
            <h1>智表</h1>
            <p class="brand-tagline">轻松制表</p>
        </div>
        <h2>数据源</h2>
        <div id="data-source-list">
            <!-- Data sources will be dynamically added here -->
        </div>
    </aside>
    <main id="main-content">
        <div id="chat-container">
            <div id="top-loading-bar" aria-hidden="true"></div>
            <section id="onboarding-banner" aria-label="快速开始指引">
                <div class="banner-text">
                    <h2>欢迎来到智表</h2>
                    <p>上传一份数据表或者直接粘贴原始文本，我们会帮你整理、分析并给出结构化结果。</p>
                    <div class="prompt-chips" role="list">
                        <button type="button" class="prompt-chip" data-fill="请帮我整理出每周的销售额，并生成汇总表">整理每周销售额</button>
                        <button type="button" class="prompt-chip" data-fill="从这些客服对话中提炼出前三大问题，并做统计">提炼客服问题</button>
                        <button type="button" class="prompt-chip" data-fill="把原始订单数据转换成城市维度的对比表">城市对比表</button>
                    </div>
                </div>
                <button id="banner-close" type="button" aria-label="隐藏指引">✕</button>
            </section>
                <section id="data-preview" aria-live="polite" aria-label="当前数据预览" class="empty">
                    <header class="preview-header">
                        <h3 id="data-preview-title">当前数据源</h3>
                        <span class="preview-meta">实时展示当前选中数据的最近状态</span>
                    </header>
                    <div id="data-preview-table" class="preview-table"></div>
                    <p id="data-preview-footnote" class="data-preview-footnote"></p>
                </section>
                <section id="chart-shortcuts" aria-label="图表快捷指令">
                    <header class="shortcuts-header">
                        <h3>常用统计图</h3>
                        <span>一键生成常见图表类型</span>
                    </header>
                    <div id="chart-shortcut-list" role="list"></div>
                </section>
            <div id="message-list"></div>
            <section id="data-input-panel" aria-hidden="true">
                <header class="panel-header">
                    <div>
                        <h3>粘贴数据</h3>
                        <p>支持 CSV 或制表符分隔文本，记得包含表头列名。</p>
                    </div>
                    <button type="button" id="data-paste-close" aria-label="关闭粘贴面板">✕</button>
                </header>
                <textarea id="data-paste-area" placeholder="在此粘贴数据，每列使用逗号或制表符分隔..."></textarea>
                <div class="panel-actions">
                    <button type="button" id="data-paste-cancel">清空</button>
                    <button type="button" id="data-paste-submit" class="primary">导入数据</button>
                </div>
            </section>
            <div id="upload-status" aria-live="polite" role="status"></div>
            <div id="input-area">
                <button id="new-session-btn" class="input-btn" aria-label="新会话">🔄</button>
                <button id="upload-btn" class="input-btn">📎</button>
                <input type="file" id="file-upload-input" style="display: none;">
                <button id="paste-btn" class="input-btn" aria-label="粘贴数据">📋</button>
                <div id="chart-style-control" class="chart-style-control hidden" aria-hidden="true">
                    <label for="chart-style-select">图表配色</label>
                    <select id="chart-style-select">
                        <option value="classic">经典配色</option>
                        <option value="vibrant">活力配色</option>
                        <option value="pastel">柔和配色</option>
                    </select>
                </div>
                <button id="dark-mode-toggle" class="input-btn" type="button" aria-label="切换到深色模式">🌙</button>
                <textarea id="command-input" placeholder="请输入指令..."></textarea>
                <button id="send-btn" class="input-btn">➢</button>
            </div>
        </div>
    </main>
</body>
</html>
