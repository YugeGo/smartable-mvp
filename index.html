<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>智表 (Smartable) - AI表格助手 MVP</title>
    <link rel="stylesheet" href="style.css">
    <!-- 使用 Vite/模块化入口 -->
    <script type="module" src="/src/main.js"></script>
</head>
<body>
    <aside id="sidebar">
        <div class="sidebar-header">
            <div class="brand">
                <h1>智表</h1>
                <p class="brand-tagline">轻松制表</p>
            </div>
        </div>
        <div class="sidebar-scroll">
            <section id="data-preview" aria-live="polite" aria-label="当前数据预览" class="sidebar-section empty">
                <header class="preview-header">
                    <h3 id="data-preview-title">当前数据源</h3>
                    <span class="preview-meta">实时展示当前选中数据的最近状态</span>
                </header>
                <div id="data-preview-table" class="preview-table"></div>
                <p id="data-preview-footnote" class="data-preview-footnote"></p>
            </section>
            <section id="chart-shortcuts" class="sidebar-section" aria-label="图表快捷指令">
                <header class="shortcuts-header">
                    <h3>常用统计图</h3>
                    <span>一键生成常见图表类型</span>
                </header>
                <div id="chart-shortcut-list" role="list"></div>
            </section>
        </div>
    </aside>
    <main id="main-content">
        <div id="chat-container">
            <div id="top-loading-bar" aria-hidden="true"></div>
            <header id="chat-header" aria-label="当前会话">
                <div class="chat-heading">
                    <div class="chat-identity">
                        <span class="chat-title">智表助手</span>
                        <span class="chat-status">随时准备分析数据</span>
                    </div>
                    <div class="chat-presence" aria-live="polite">
                        <span class="chat-presence-indicator" aria-hidden="true"></span>
                        <span class="chat-presence-text">在线</span>
                    </div>
                </div>
                <div id="dataset-tray" class="dataset-tray" aria-live="polite" aria-label="已上传数据源">
                    <span class="dataset-empty">尚未上传数据</span>
                </div>
            </header>
            <section id="onboarding-banner" aria-label="快速开始指引">
                <div class="onboarding-primary">
                    <div class="onboarding-icon" aria-hidden="true">📊</div>
                    <div class="onboarding-copy">
                        <h2>两步开始你的数据对话</h2>
                        <p>先导入一份数据，再向智表助手提出问题，我们会马上给你结构化的结果与图表。</p>
                    </div>
                </div>
                <ol class="onboarding-steps">
                    <li>
                        <span class="step-number">1</span>
                        <div class="step-copy">
                            <strong>导入数据</strong>
                            <span>支持 Excel、CSV，或直接粘贴原始文本</span>
                        </div>
                    </li>
                    <li>
                        <span class="step-number">2</span>
                        <div class="step-copy">
                            <strong>提出需求</strong>
                            <span>直接输入问题，或使用下面的快捷提示</span>
                        </div>
                    </li>
                </ol>
                <div class="onboarding-prompts" role="list">
                    <button type="button" class="prompt-chip" data-fill="请帮我整理出每周的销售额，并生成汇总表">整理每周销售额</button>
                    <button type="button" class="prompt-chip" data-fill="从这些客服对话中提炼出前三大问题，并做统计">提炼客服问题</button>
                    <button type="button" class="prompt-chip" data-fill="把原始订单数据转换成城市维度的对比表">城市对比表</button>
                </div>
                <button id="banner-close" type="button" aria-label="关闭指引" class="onboarding-close">了解</button>
            </section>
            <div id="message-list"></div>
            <section id="data-input-panel" aria-hidden="true">
                <header class="panel-header">
                    <div>
                        <h3>粘贴数据</h3>
                        <p>支持 CSV 或制表符分隔文本，记得包含表头列名。</p>
                    </div>
                    <button type="button" id="data-paste-close" aria-label="关闭粘贴面板">✕</button>
                </header>
                <textarea id="data-paste-area" placeholder="在此粘贴数据，每列使用逗号或制表符分隔..."></textarea>
                <div class="panel-actions">
                    <button type="button" id="data-paste-cancel">清空</button>
                    <button type="button" id="data-paste-submit" class="primary">导入数据</button>
                </div>
            </section>
            <div id="upload-status" aria-live="polite" role="status"></div>
            <div id="input-area">
                <button id="new-session-btn" class="input-btn" aria-label="新会话">🔄</button>
                <button id="upload-btn" class="input-btn">📎</button>
                <input type="file" id="file-upload-input" style="display: none;">
                <button id="paste-btn" class="input-btn" aria-label="粘贴数据">📋</button>
                <button id="dark-mode-toggle" class="input-btn" type="button" aria-label="切换到深色模式">🌙</button>
                <textarea id="command-input" placeholder="请输入指令..."></textarea>
                <button id="send-btn" class="input-btn">➢</button>
            </div>
        </div>
    </main>
</body>
</html>
