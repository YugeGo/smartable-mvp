# 智表 (Smartable) - V1.6 稳定性与体验迭代

> 这是什么？
>
> 智表是一个“对话式表格助手”。你用自然语言描述需求，它帮你把数据导入、清洗、统计、画图、导出，一次说清楚就能办妥；不想学 Excel 公式也能做出专业结果。

适合谁：
- 讨厌公式、想省时间的运营/市场/客服/财务同学
- 需要把零散数据快速出图与汇报的人

常见能做的事：
- 清洗：去空值、去重、筛选、排序、Top-K
- 统计：按维度聚合、同比/环比、Top榜单
- 可视化：折线/柱状/饼图等，一键下载图片
- 导出：结果表导出 CSV/Excel，用于二次处理

欢迎来到“智表”，一款由 AI 驱动、专为数据整理和分析打造的对话式表格助手。通过自然语言与它沟通，就能完成上传、清洗、统计、可视化、导出等一系列琐碎工作，把繁琐流程缩短到几次对话。

**线上体验地址:** https://smartable-mvp.netlify.app/

---

## ✨ V1.6 有什么新变化？

此版本聚焦于提升核心体验的稳定性和易用性，解决了多个关键痛点。

| 能力 | 说明 |
| --- | --- |
| **数据粘贴面板** | 新增 `📋` 按钮，一键展开面板，可直接粘贴 CSV 或制表符分隔的文本，导入体验与文件上传看齐。 |
| **多轮对话列守护** | 引入前后端双重校验机制。AI 若意外丢弃列，前端会拒绝更新并发出提示，确保数据在多轮对话中不丢失。 |
| **图表高度自-适应** | 智能检测图表分类数量，当类别过多时自动拉伸容器高度，彻底解决图表重叠问题，视觉效果更佳。 |
| 现代感 UI 2.0 | 延续浅色科技感背景、玻璃拟态面板、圆角消息气泡，让对话界面更轻盈。 |
| 上手即用的引导 | 首屏展示「推荐问法」，AI 会先发一条操作提示，首次使用无压力。 |
| AI 表格 + 图表双输出 | 深度集成 ECharts，当指令需要可视化时自动渲染图表，并铺满聊天区域。 |

---

## 🚀 核心功能总览

1.  **轻量对话式体验**
    类似 ChatGPT 的单列对话流，支持键盘回车、Shift+Enter 换行、按钮点击等常见操作。

2.  **灵活数据输入**
    - **文件上传**: 点击 `📎` 按钮，支持 `.xlsx`、`.xls`、`.csv`，本地解析后生成统一 CSV。
    - **粘贴数据**: 点击 `📋` 按钮，在展开的面板中直接粘贴表格文本，支持 CSV 或制表符分隔。

3.  **AI 数据加工 (稳定性增强)**
    依托 DeepSeek，大部分常见的数据整理需求（筛选、聚合、透视、统计、清洗、补列）都能直接用自然语言描述完成。内置的列守护机制可有效防止 AI 在多-轮对话中遗忘关键列。

4.  **图表生成 (体验优化)**
    后端强制输出 ECharts 配置，前端渲染柱状、折线、饼图等常见统计图。新增的高度自适应能力确保了在任何数据密度下都有良好的可视化效果。

5.  **结果导出**
    任意一条 AI 回复的表格都能立即通过 **📥 下载 Excel** 按钮导出为 `.xlsx` 文件，方便落地到线下办公软件继续处理。

---

## 🛠️ 技术栈与架构

| 模块 | 技术 |
| --- | --- |
| 前端 | 原生 HTML / CSS / JavaScript (ES6+)、SheetJS (xlsx)、ECharts |
| 后端 | Netlify Functions (Node.js) |
| AI 模型 | DeepSeek Chat API（结构化 JSON 输出 + 图表配置） |
| 部署 | GitHub Releases + Netlify CI/CD |

后端函数会把最新表格、原始表格以及它们的表头结构一并发送给模型，要求以 `{ result, chart }` 的 JSON 格式返回。前端根据字段分别渲染表格与图表，并在多轮对话中校验返回数据的列完整性。

---

## 📖 使用指南

1.  打开线上地址：`https://smartable-mvp.netlify.app/`
2.  选择一种方式导入数据：
    - 点击左下角 `📎` **上传** Excel 或 CSV 文件。
    - 点击 `📋` **粘贴** 按钮，将表格文本粘贴到面板中并导入。
3.  成功后会看到状态提示，此时可以在输入框描述你的需求，例如：「按地区统计销售额并画饼图」。
4.  等待 Skeleton 消失，AI 会返回最新表格和图表结果。
5.  如需继续分析，直接在同一线程接着发指令即可，多轮语境始终成立。
6.  当某一步结果符合预期时，点击表格下方 **📥 下载 Excel** 备份到本地。

---

## 🗺️ 近期路线图

- [ ] 允许离线/刷新后保留对话上下文与数据（草案中）
- [ ] 丰富图表类型（堆叠、散点、仪表盘等）并允许自定义主题
- [ ] 引入基础的权限/配额策略，确保线上体验稳定

欢迎通过 Issue / PR / 讨论区提出改进建议或使用反馈。

---

> 由 [YugeGo] 与 AI 伙伴共同构建。
> 最后更新时间：2025 年 10 月 19 日